import{r as h,k as j,j as s,l as R,m as S,F as b,n as E,o as H,d as P,u as B,c as w,q as D,s as I,t as T,R as $,a as q,v as U,B as z,S as O}from"./index-BmscWBrJ.js";import{z as x,u as V,s as W,I as y}from"./zod-DMZJTbXa.js";import{u as Y}from"./hook-C9XmxSU9.js";import{A as _}from"./Anchor-DcQ9BZLT.js";const v=R("h4");v.displayName="DivStyledAsH4";const C=h.forwardRef(({className:a,bsPrefix:e,as:n=v,...r},t)=>(e=j(e,"alert-heading"),s.jsx(n,{ref:t,className:S(a,e),...r})));C.displayName="AlertHeading";const N=h.forwardRef(({className:a,bsPrefix:e,as:n=_,...r},t)=>(e=j(e,"alert-link"),s.jsx(n,{ref:t,className:S(a,e),...r})));N.displayName="AlertLink";const k=h.forwardRef((a,e)=>{const{bsPrefix:n,show:r=!0,closeLabel:t="Close alert",closeVariant:c,className:m,children:l,variant:i="primary",onClose:u,dismissible:p,transition:o=b,...g}=Y(a,{show:"onClose"}),d=j(n,"alert"),L=E(F=>{u&&u(!1,F)}),f=o===!0?b:o,A=s.jsxs("div",{role:"alert",...f?void 0:g,ref:e,className:S(m,d,i&&`${d}-${i}`,p&&`${d}-dismissible`),children:[p&&s.jsx(H,{onClick:L,"aria-label":t,variant:c}),l]});return f?s.jsx(f,{unmountOnExit:!0,...g,ref:void 0,in:r,children:A}):r?A:null});k.displayName="Alert";const G=Object.assign(k,{Link:N,Heading:C}),J=x.object({email:x.string().min(1,{message:"Email Required"}).email(),password:x.string().min(1,{message:"Password Required"})}),K=()=>{const a=P(),e=B(),{loading:n,error:r}=w(o=>o.authSlice),[t,c]=D(),{register:m,formState:{errors:l},handleSubmit:i}=V({resolver:W(J),mode:"onSubmit"}),u=async o=>{t.get("message")&&c("");const{email:g,password:d}=o;a(T({email:g,password:d})).unwrap().then(()=>e("/"))},p=w(o=>o.authSlice.accessToken);return h.useEffect(()=>(p&&e("/"),()=>{a(I())}),[a]),{loading:n,error:r,submitForm:u,register:m,formState:{errors:l},handleSubmit:i,searchParams:t}},ss=()=>{var l,i;const{loading:a,error:e,submitForm:n,register:r,formState:{errors:t},handleSubmit:c,searchParams:m}=K();return s.jsxs(s.Fragment,{children:[s.jsx("h2",{children:"User Login"}),s.jsx($,{children:s.jsxs(q,{md:{span:6,offset:3},children:[m.get("message")==="account_created"&&s.jsx(G,{children:"Your Acount Created Successfully, Please Login!"}),s.jsxs(U,{onClick:c(n),children:[s.jsx(y,{label:"Email Address",name:"email",error:(l=t.email)==null?void 0:l.message,register:r}),s.jsx(y,{label:"Password",name:"password",error:(i=t.password)==null?void 0:i.message,register:r,type:"password"}),s.jsx(z,{variant:"primary",type:"submit",disabled:a==="pending",children:a==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(O,{animation:"border",size:"sm"})," Loading..."]}):"Submit"}),e&&s.jsx("p",{style:{color:"#DC3545",marginTop:"10px"},children:e})]})]})})]})};export{ss as default};
